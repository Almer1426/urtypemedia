window.galleryData = [
    {
        id: 'porsche-992-st',
        title: 'Porsche 992 ST',
        gridImage: 'assets/images/gallery/992 ST/WebP/DSC00418-2.webp', 
        details: 'ILCE-6400<br>E PZ 16-50mm F3.5-5.6 OSS<br>35mm f/5.0 1/60s ISO200',
        detailImages: [
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00418-2.webp', hd: 'assets/images/gallery/992 ST/DSC00418-2.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00422.webp', hd: 'assets/images/gallery/992 ST/DSC00422.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00439.webp', hd: 'assets/images/gallery/992 ST/DSC00439.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00449.webp', hd: 'assets/images/gallery/992 ST/DSC00449.jpg' }
        ]
    },
    {
        id: 'porsche-992-st',
        title: 'Porsche 992 ST',
        gridImage: 'assets/images/gallery/992 ST/WebP/DSC00418-2.webp', 
        details: 'ILCE-6400<br>E PZ 16-50mm F3.5-5.6 OSS<br>35mm f/5.0 1/60s ISO200',
        detailImages: [
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00418-2.webp', hd: 'assets/images/gallery/992 ST/DSC00418-2.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00422.webp', hd: 'assets/images/gallery/992 ST/DSC00422.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00439.webp', hd: 'assets/images/gallery/992 ST/DSC00439.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00449.webp', hd: 'assets/images/gallery/992 ST/DSC00449.jpg' }
        ]
    },
    {
        id: 'porsche-992-st',
        title: 'Porsche 992 ST',
        gridImage: 'assets/images/gallery/992 ST/WebP/DSC00418-2.webp', 
        details: 'ILCE-6400<br>E PZ 16-50mm F3.5-5.6 OSS<br>35mm f/5.0 1/60s ISO200',
        detailImages: [
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00418-2.webp', hd: 'assets/images/gallery/992 ST/DSC00418-2.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00422.webp', hd: 'assets/images/gallery/992 ST/DSC00422.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00439.webp', hd: 'assets/images/gallery/992 ST/DSC00439.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00449.webp', hd: 'assets/images/gallery/992 ST/DSC00449.jpg' }
        ]
    },
    {
        id: 'porsche-992-st',
        title: 'Porsche 992 ST',
        gridImage: 'assets/images/gallery/992 ST/WebP/DSC00418-2.webp', 
        details: 'ILCE-6400<br>E PZ 16-50mm F3.5-5.6 OSS<br>35mm f/5.0 1/60s ISO200',
        detailImages: [
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00418-2.webp', hd: 'assets/images/gallery/992 ST/DSC00418-2.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00422.webp', hd: 'assets/images/gallery/992 ST/DSC00422.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00439.webp', hd: 'assets/images/gallery/992 ST/DSC00439.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00449.webp', hd: 'assets/images/gallery/992 ST/DSC00449.jpg' }
        ]
    },
    {
        id: 'porsche-992-st',
        title: 'Porsche 992 ST',
        gridImage: 'assets/images/gallery/992 ST/WebP/DSC00418-2.webp', 
        details: 'ILCE-6400<br>E PZ 16-50mm F3.5-5.6 OSS<br>35mm f/5.0 1/60s ISO200',
        detailImages: [
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00418-2.webp', hd: 'assets/images/gallery/992 ST/DSC00418-2.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00422.webp', hd: 'assets/images/gallery/992 ST/DSC00422.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00439.webp', hd: 'assets/images/gallery/992 ST/DSC00439.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00449.webp', hd: 'assets/images/gallery/992 ST/DSC00449.jpg' }
        ]
    },
    {
        id: 'porsche-992-st',
        title: 'Porsche 992 ST',
        gridImage: 'assets/images/gallery/992 ST/WebP/DSC00418-2.webp', 
        details: 'ILCE-6400<br>E PZ 16-50mm F3.5-5.6 OSS<br>35mm f/5.0 1/60s ISO200',
        detailImages: [
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00418-2.webp', hd: 'assets/images/gallery/992 ST/DSC00418-2.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00422.webp', hd: 'assets/images/gallery/992 ST/DSC00422.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00439.webp', hd: 'assets/images/gallery/992 ST/DSC00439.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00449.webp', hd: 'assets/images/gallery/992 ST/DSC00449.jpg' }
        ]
    },
    {
        id: 'porsche-992-st',
        title: 'Porsche 992 ST',
        gridImage: 'assets/images/gallery/992 ST/WebP/DSC00418-2.webp', 
        details: 'ILCE-6400<br>E PZ 16-50mm F3.5-5.6 OSS<br>35mm f/5.0 1/60s ISO200',
        detailImages: [
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00418-2.webp', hd: 'assets/images/gallery/992 ST/DSC00418-2.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00422.webp', hd: 'assets/images/gallery/992 ST/DSC00422.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00439.webp', hd: 'assets/images/gallery/992 ST/DSC00439.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00449.webp', hd: 'assets/images/gallery/992 ST/DSC00449.jpg' }
        ]
    },
    {
        id: 'porsche-992-st',
        title: 'Porsche 992 ST',
        gridImage: 'assets/images/gallery/992 ST/WebP/DSC00418-2.webp', 
        details: 'ILCE-6400<br>E PZ 16-50mm F3.5-5.6 OSS<br>35mm f/5.0 1/60s ISO200',
        detailImages: [
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00418-2.webp', hd: 'assets/images/gallery/992 ST/DSC00418-2.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00422.webp', hd: 'assets/images/gallery/992 ST/DSC00422.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00439.webp', hd: 'assets/images/gallery/992 ST/DSC00439.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00449.webp', hd: 'assets/images/gallery/992 ST/DSC00449.jpg' }
        ]
    },
    {
        id: 'porsche-992-st',
        title: 'Porsche 992 ST',
        gridImage: 'assets/images/gallery/992 ST/WebP/DSC00418-2.webp', 
        details: 'ILCE-6400<br>E PZ 16-50mm F3.5-5.6 OSS<br>35mm f/5.0 1/60s ISO200',
        detailImages: [
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00418-2.webp', hd: 'assets/images/gallery/992 ST/DSC00418-2.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00422.webp', hd: 'assets/images/gallery/992 ST/DSC00422.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00439.webp', hd: 'assets/images/gallery/992 ST/DSC00439.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00449.webp', hd: 'assets/images/gallery/992 ST/DSC00449.jpg' }
        ]
    },
    {
        id: 'porsche-992-st',
        title: 'Porsche 992 ST',
        gridImage: 'assets/images/gallery/992 ST/WebP/DSC00418-2.webp', 
        details: 'ILCE-6400<br>E PZ 16-50mm F3.5-5.6 OSS<br>35mm f/5.0 1/60s ISO200',
        detailImages: [
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00418-2.webp', hd: 'assets/images/gallery/992 ST/DSC00418-2.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00422.webp', hd: 'assets/images/gallery/992 ST/DSC00422.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00439.webp', hd: 'assets/images/gallery/992 ST/DSC00439.jpg' },
            { thumb: 'assets/images/gallery/992 ST/WebP/DSC00449.webp', hd: 'assets/images/gallery/992 ST/DSC00449.jpg' }
        ]
    },
    // ... Tambahkan data mobil lainnya ...
];

window.openLightbox = function(itemId) {
    const lightbox = document.getElementById('lightbox');
    if (!lightbox) return;

    const itemData = window.galleryData.find(item => item.id === itemId);
    if (!itemData) {
        console.error('Data for this item ID not found:', itemId);
        return;
    }

    const lightboxMainImg = lightbox.querySelector('.lightbox-main-image img');
    const lightboxTitle = lightbox.querySelector('.lightbox-title');
    const lightboxDetailsP = lightbox.querySelector('.lightbox-details p');
    const relatedPhotosGrid = lightbox.querySelector('.related-photos-grid');

    lightboxMainImg.src = itemData.detailImages[0].hd;
    lightboxTitle.textContent = itemData.title;
    lightboxDetailsP.innerHTML = itemData.details;
    relatedPhotosGrid.innerHTML = '';

    itemData.detailImages.forEach((imageSet, index) => {
        const thumbImg = document.createElement('img');
        thumbImg.src = imageSet.thumb;
        thumbImg.dataset.hdSrc = imageSet.hd;
        if (index === 0) thumbImg.classList.add('active');
        
        thumbImg.addEventListener('click', () => {
            lightboxMainImg.src = thumbImg.dataset.hdSrc;
            relatedPhotosGrid.querySelector('.active')?.classList.remove('active');
            thumbImg.classList.add('active');
        });
        relatedPhotosGrid.appendChild(thumbImg);
    });

    lightbox.classList.add('is-open');
    document.documentElement.classList.add('lightbox-open');
}

// --- LOGIKA GLOBAL UNTUK SEMUA HALAMAN ---
document.addEventListener('DOMContentLoaded', function() {

    // --- 1. LOGIKA SWIPER (HANYA UNTUK HOMEPAGE) ---
    let mySwiper;
    function swiperMode() {
        const swiperContainer = document.querySelector('.swiper');
        if (!swiperContainer) return;

        let mobileView = window.matchMedia('(max-width: 640px)');

        if (mobileView.matches) {
            if (!mySwiper) {
                mySwiper = new Swiper(swiperContainer, {
                    loop: true,
                    slidesPerView: 1,
                    spaceBetween: 20,
                    centeredSlides: true,
                    pagination: {
                        el: '.swiper-pagination',
                        clickable: true,
                    }
                });
            }
        } else {
            if (mySwiper) {
                mySwiper.destroy(true, true);
                mySwiper = undefined;
            }
        }
    }
    swiperMode();
    window.addEventListener('resize', swiperMode);

    // --- 2. LOGIKA HAMBURGER MENU ---
    const hamburgerButton = document.querySelector('.hamburger-button');
    const navMenu = document.querySelector('nav');

    if (hamburgerButton && navMenu) {
        hamburgerButton.addEventListener('click', () => {
            navMenu.classList.toggle('is-active');
            hamburgerButton.classList.toggle('is-active');
        });
    }

    // --- 3. LOGIKA LINK NAVIGASI AKTIF (DISEMPURNAKAN) ---
    const navLinks = document.querySelectorAll('.nav-non');
    const currentLocation = window.location.href;
    navLinks.forEach(link => {
        const linkHref = link.href.replace('/index.html', '');
        if (linkHref === currentLocation.replace('/index.html', '')) {
            link.classList.add('active');
        } else {
            link.classList.remove('active');
        }
    });
    navLinks.forEach(link => {
        link.addEventListener('click', function() {
            navLinks.forEach(navLink => navLink.classList.remove('active'));
            this.classList.add('active');
        });
    });

    // --- 4. LOGIKA MENUTUP & MEMBUKA LIGHTBOX ---
    const lightbox = document.getElementById('lightbox');
    if (lightbox) {
        const lightboxClose = lightbox.querySelector('.lightbox-close');
        const lightboxOverlay = lightbox.querySelector('.lightbox-overlay');

        function closeLightbox() {
            lightbox.classList.remove('is-open');
            document.documentElement.classList.remove('lightbox-open');
        }

        lightboxClose.addEventListener('click', closeLightbox);
        lightboxOverlay.addEventListener('click', closeLightbox);

        document.body.addEventListener('click', function(e) {
            const link = e.target.closest('.image-container-home, .image-container');
            if (link) {
                e.preventDefault();
                const carId = link.dataset.id;
                if (carId) window.openLightbox(carId);
            }
        });
    }
});